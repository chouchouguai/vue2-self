{"version":3,"file":"vue.js","sources":["../src/utils/index.js","../src/global-api/index.js","../src/compile/generate.js","../src/compile/parseAst.js","../src/compile/index.js","../src/utils/nextTick.js","../src/observe/arr.js","../src/observe/dep.js","../src/observe/index.js","../src/initState.js","../src/observe/watcher.js","../src/vnode/patch.js","../src/lifecycle.js","../src/init.js","../src/vnode/index.js","../src/index.js"],"sourcesContent":["//对象合并\nexport const HOOKS = [\n    \"beforeCreate\",\n    \"created\",\n    \"beforeMount\",\n    \"mounted\",\n    \"beforeUpdate\",\n    \"updated\",\n    \"beforeDestory\",\n    \"destoryed\"\n];\n//策略模式 -一般如果判断if情况比较多 可以用该模式\nlet starts = {};\n//处理数据\nstarts.data = function(parentVal,childVal){\n    return childVal;\n}//合并data\nstarts.computed = function(){}//合并computed\nstarts.watch = function(){}//合并watch\nstarts.methods = function(){}//合并methods\n//遍历生命周期，依次添加starts[beforeCreate],starts[created]。。等\nHOOKS.forEach(hooks=>{\n    starts[hooks] = mergeHook\n})\nfunction mergeHook(parentVal,childVal){\n    // {created:[a,b,c],watch:[a,b]}\n    if(childVal){\n        if(parentVal){\n            return parentVal.concat(childVal)\n        }else{\n            return [childVal]//[a]\n        }\n    }else{\n        return parentVal\n    }\n}\n/**\n * \n * @param {*} parent \n * @param {*} child  Vue.Mixin(参数),参数就是child\n * @returns \n */\nexport function mergeOptions(parent,child){\n    // console.log('---mergeOptions',parent,child)\n    //Vue.options = {created:[a,b,c],watch:[a,b]}\n    const options = {};\n    //如果有parent 没有 child\n    for(let key in parent){\n        mergeField(key)\n    }\n    //有child 没有 parent\n    for(let key in child){//child就是传过来的mixin 第一次child={created:function a(){}}\n        mergeField(key)\n    }\n    function mergeField(key){\n        //根据key 策略模式\n        if(starts[key]){//若存在该方法\n            options[key] = starts[key](parent[key],child[key])\n        }else{\n            options[key] = child[key]\n        }\n    }\n    // console.log('---optiosns',options)\n    return options;\n}","import { mergeOptions } from \"../utils/index\"\n/**\n * \n * @param {*} Vue \n *  源码中最终 Vue.options = {created:[a,b,c],watch:[a,b]}\n */\nexport function initGlobalApi(Vue){\n   \n    Vue.options = {}\n    Vue.Mixin = function (mixin){//mixin为Vue.Mixin(的参数=mixin)\n        // console.log('---mixin',mixin,this.options)\n        //对象的合并\n        this.options = mergeOptions(this.options,mixin)//this是当前vue实例,第一次this.options没值\n    //    console.log('---initG',Vue.options);\n    //    console.log('----Vue.$options',Vue);\n\n    }\n}","/**\n * <div id=\"app\" >Hello {{msg}} </div>\n * render(){ //_c解析标签,_v解析文本,_s解析插值表达式\n *   return _c('div',{id:app},_v('hello'+_s(msg)),_c())\n * }\n * 本文件的主要任务就是获取render函数的字符串部分\n * \n */\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;// 匹配默认 {{}}\n/**\n * 处理属性ast中 {name:'style',value: \"color:red;font-size: 20px\"\n * return: {style:{color:'red',font-size: '20px'}}\n * */\nfunction genProps(attrs) {\n    let str = '';\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i];//{name:'style',value: \"color:red;font-size: 20px\"\n        if (attr.name === 'style') {//获取是否是行内样式\n            let obj = {};\n            attr.value.split(';').forEach(item => {//[\"color:'red'\"\",\"font-size:'20px'\"]\n                let [key, value] = item.split(\":\");\n                obj[key] = value;//obj[color]='red',obj['font-size']=\"20px\"\n            });\n            attr.value = obj;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`;//str+='style:\"{color:red,font-size:20px}\"'\n    }\n    return `{${str.slice(0, -1)}}`\n}\n//处理所有子节点们\n/**\n * \n * @param {*} el \n * @returns \n */\nfunction genChildren(el) {\n    let children = el.children;//children:[{type: 3, text: 'Hello {{msg}} '}]\n    // console.log('---children', children)\n    if (children) {\n        return children.map(child => gen(child)).join(',')//_v('hello'),_v\n    }\n}\n/**\n * 处理子节点\n * @param {*} node\n */\nfunction gen(node) {\n    if (node.type == 1) {//若是元素节点\n        return generate(node)\n    } else {//非元素节点，本处默认就是文本 1)普通文本 2）{{msg}}\n        let text = node.text;//获取文本内容 hello {{msg}}\n        if (!defaultTagRE.test(text)) {//检查文本中是否无插值表达式\n            return `_v(${JSON.stringify(text)})`;//解析普通文本用_v()函数\n        }\n        //有{{}}\n        let tokens = [];//存放每一段的代码\n        let lastindex = defaultTagRE.lastIndex = 0;//若没有给lastIndex(下次匹配的起始位置)赋值，则defaultTagRE.test只能匹配一个字符串\n        let match\n        while (match = defaultTagRE.exec(text)) {//match=[\"{{msg}}\",\" msg  \",index:7,input:\" hello {{ msg }} \",groups:undefined]\n            let index = match.index;//当前符合正则的下标位置\n            if (index > lastindex) {\n                tokens.push(JSON.stringify(text.slice(lastindex, index)));//截取文本中(从0到{{ 的内容)--普通文本\" hello \"\n            }\n            // {{msg}}\n            tokens.push(`_s(${match[1].trim()})`)\n            //lastindex = 当前下标 + 表达式的长度 如 hello {{ msg }},haha\n            lastindex = index + match[0].length;\n            //\n        }\n        if (lastindex < text.length) {//{{msg}}后面还有 haha ,msg}}最后一个右括号的下标 < text文本的长度\n            tokens.push(JSON.stringify(text.slice(lastindex)))//取出 haha\n        }\n        return `_v(${tokens.join(\"+\")})`\n    }\n}\n\nexport function generate(el) {\n    //注意属性 {id:app,style:{color:red;font-size:12px}}\n    // console.log('---fennerate',el)\n    let children = genChildren(el);\n    //_c(根节点,参数对象||null,子节点||null,)\n    let code = `_c('${el.tag}',${el.attrs.length ? `${genProps(el.attrs)}` : 'undefined'}${children ? `,${children}` : ''})`;\n    // console.log('---code',code)\n    return code;\n}","/**\n * ps：ast语法树 (abstract syntax tree 抽象语法树)  vnode(虚拟节点)\n * 如：页面结构 <div id=\"#app\">hello {{msg}}<span></span></div>\n * 对应ast为：\n * {\n * tag:'div',\n * attrs:[{id:'app'}],\n * children:[{tag:null,text:'hello'},{tag:'span'}]\n */\n\n \n /** 以下为vue2中区别标签相关的正则 */\n const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`// 标签名称 ---如 div\n const qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;// 如  <span:xx>\n const startTagOpen = new RegExp(`^<${qnameCapture}`);// 标签开头的正则 捕获的内容是标签名    如 <div\n \n const attribute =\n   /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // \\s所有空白符，包括换行 id=\"app\"\n const startTagClose = /^\\s*(\\/?)>/;// 匹配标签结束的 >   ps: startTagOpen + attribute + startTagClose = \"<div id=\"app\" >\n \n const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;// 匹配默认 {{}}\n const endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);// 匹配标签结尾 </div>\n // 将str -> ast\n // 遍历\n /*\n 如： <div id=\"app\"> hello {{msg}} <h1></h1> </div>\n 创建一个 ast 对象\n 根据标签名和参数 返回一个ast对象 {}\n nodetype的类型\n 1:元素节点\n 2:属性节点\n 3:文本节点\n */\n \n function createASTElement(tag,attrs){\n   return {\n     tag,//元素 div span h等\n     attrs,//属性 id class 等\n     children:[],//子节点 如div 中包含了span 则span就是自己点\n     type:1,//nodetype的类型\n     parent:null//该元素的父元素\n   }\n }\n let root;//根元素\n let createParent ;//当前元素的父元素\n //数据结构 栈:先进后出\n let stack = [];//[div]\n \n \n // 开始标签 <div id='app'>\n /**\n  * \n  * @param {*} tag \n  * @param {*} attrs \n  * 将开始标签转为ast对象，并入栈 (注:end方法中 会将其出栈)\n  */\n function start(tag, attrs) {/**传入标签名 和 参数  */\n   let element = createASTElement(tag,attrs);\n   if(!root){\n     root = element;\n   }\n   createParent = element;\n   stack.push(element);\n }\n // 获取文本 {{msg}}\n function charts(text) {\n//    console.log('文本', text)\n   //替换 空格\n   text = text.replace(/\\s/g,'');//\n   if(text){\n     createParent.children.push({\n       type:3,//文本类型\n       text//文本内容\n     })\n   }\n }\n // 结束标签 </div>\n /**\n  * \n  * @param {*} tag \n  * 从stack中 取出最后进的元素,以及读取前一个元素 将两个元素的父子关系分别用属性parent 和childern关联起来\n  */\n function end(tag) {\n//    console.log('---结束标签end', tag)\n   //如此时<div><h></h></div  stack中有两个元素 [div,h]\n   let element = stack.pop();//取出栈中第一个元素 栈后进先出 pop取的就是最后进的那个 h\n   createParent = stack[stack.length-1];//此时取出的是栈中最后进的前一个 div\n   if(createParent){//元素的闭合\n     element.parent = createParent.tag;//{tag:h,attrs:null,type:1,parent:'div'} \n     createParent.children.push(element);//{tag:div,attrs:[{id:'app'}],type:1,children:[{tag:h,attrs:null,type:1}]}\n   }\n }\n \n \n /**\n  * \n  * @param {*} html - 本次需要转换的html\n  * step1:\n  * 该方法是将html字符串 ->初级形态的ast\n  * 经过该方法后 开始标签 <div id=\"app\"> --->  {tagName:'div',attrs:[{name:'id',value:'app'}]}\n  *            文本    hello {{msg}}   --->  hello {{msg}}\n  *            结束标签  </div>         --->  ['</div>', 'div', index: 0, input: '</div>', groups: undefined]\n  * return :当前html的ast表示对象 (其中用parent 和 childern表示了节点间的包含关系)\n  */\n export function parseHTML(html) {// html中包含的内容只有3大类型:开始标签  文本  结束标签\n   // 如: <div id=\"app\"> hello {{msg}} <h></h> </div> \n   /** 思路 每次解析结束完成部分的html 删除 */\n   while (html) {// html 为空结束\n     // 判断标签\n     let textEnd = html.indexOf('<');\n     if (textEnd === 0) {// html以 < 开头 说明是标签\n       // 1.看是否是开始标签，与开始标签的正则startTagOpen 匹配\n       const startTagMatch = parseStartTag();//  开始标签的内容-该方法是单独定义的\n       // console.log('----startTagMatch',startTagMatch)\n       if (startTagMatch) {\n         start(startTagMatch.tagName, startTagMatch.attrs)//---开始标签的处理，根据标签名称和参数,创建root对象，当前节点对象,转为ast对象并入栈\n         continue;\n       }\n       //结束标签 ->若为结束标签</标签名>\n       let endTagMatch = html.match(endTag)//从html中匹配结束标记的正则(endTag),得到与正则匹配的文本内容\n    //    console.log('---enTagMatch',endTagMatch)\n       if (endTagMatch) {//若存在结束标签 \n         advance(endTagMatch[0].length)\n         end(endTagMatch[1])//到结束标签了 则将当前节点和其父节点关联起来,并放到root对象中去\n         continue;\n       }\n     }\n     // 文本\n     // 说明html 不是< 开头 如： hello</div> ,这个textEnd就是5\n     let text;\n     if (textEnd > 0) {\n       //  解析文本\n       //  获取文本内容 ---方案:// hello</div> 截取< 符号之前的内容(其实就是hello)\n       //  console.log('----textEnd',textEnd)\n       text = html.slice(0, textEnd);\n      //  console.log('---parseHTML',text);\n     }\n     if (text) {\n       advance(text.length)\n       charts(text)//将文本内容放入到root对象中\n     }\n     // break;\n   }\n  /**\n   * 解析开始标签\n   * @returns \n   * {\n   *  tagName:div\n   *  attrs:[\n   *    {\n   *      name:\"id\",\n   *      value:\"app\"\n   *    }\n   * ]\n   * }\n   */\n   function parseStartTag() {\n     // 子表达式指:正则表达式中用小括号包起来的表达式\n     /** match(正则表达式),若正则表达式没有全局标识/g,\n     *   则该match方法只执行一次匹配，\n     *   返回[匹配文本,与子表达式匹配的文本们...,index:匹配开始位置,input:进行匹配的字符串本身的引用] \n     *   若无结果 返回null*/\n     const start = html.match(startTagOpen);\n     // start = ['<div', 'div', index: 0, input: \"<div id='#app'>hello {{msg}}<span></span></div>\", groups: undefined]\n     if (start) {\n       // 创建ast 语法树-初级形态\n       let match = {\n         tagName: start[1],\n         attrs: []\n       }\n       advance(start[0].length)// 向前推进一步 (删除开始标签)\n       // 获取属性 -注意 属性可能有多个 需要遍历\n       let attr\n       /*\n         注意 刚才删除了开始标签 但是开始标签还有个 >  \n         比如第一次删除了开始标签<div  剩余 id='#app'> hello {{msg}} <span></span></div>\n       */\n       let end\n       /* \n         循环剩下的html -若剩余的html 不是单纯的> (html.match(startTagClose) 为true则表示仅为>) \n         并且有属性(html.match(attribute)为true表示有属性内容)\n       */\n       // console.log('---->',html.match(startTagClose))\n       //console.log('----attribute',html.match(attribute))//[' id=\"app\"', 'id', '=', 'app', undefined, undefined, index: 0, input: ' id=\"app\">\\n    Hello {{name}}\\n  </div>', groups: undefined]\n       while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n         // 将属性追加到match的attrs中 [{name:'id',value:'app'}]\n         match.attrs.push({\n           name: attr[1],\n           value: attr[3] || atrr[4] || atrr[5]\n         })\n         advance(attr[0].length)\n       }\n       if (end) {\n         advance(end[0].length)\n         return match;// <div id='app'> 解析完成 返回开始节点对应的ast初级形态语法树\n       }\n     }\n   }\n   function advance(n) {\n     // 删除以及识别出的html字符串 （如 识别了<div 则删除<div,n为识别出的字符串的长度）\n     html = html.substring(n)// 从html的n位置开始截取到最后,返回截取后的内容---删除了识别出的内容\n   }\n  //  console.log('---root',root)\n   return root;\n }\n\n /**\n  * 版本1综合描述：\n  * * 如：页面结构 <div id=\"#app\">hello {{msg}}<h1></h1></div>\n * 最终需要获取内容为：\n * {\n * tag:'div',\n * attrs:[{id:'app'}],\n * children:[{tag:null,text:'hello'},{tag:'span'}]\n * \n  * 根据文本内容字符串<div id=\"#app\">hello {{msg}}<h1></h1></div>\n  * 分析:该字符串中只有3部分内容: 标签 <div> \n  *                           文本 hello {{msg}}\n  *                           标签 <h1> (跟div有父子关系)\n  * 解析入口:parseHTML(html)\n  * 只要html有内容,则一直循环\n    * 1) 若html 是以< 开头,则表示是标签(此时需要考虑 是<div> 还是</div>)-->\n    *     1.1)调用parseStartTag方法\n        *     1.1.1) 若是<div>(开始标签)\n        *        1.1.1.1)找到符合开始标签的正则(startTagOpen) <标签名 属性=\"值\"\n        *        1.1.1.2）创建对象match = {tagName:值,attrs:[]},并删除html 中 “<标签名”部分\n        *        1.1.1.3）找到不符合标签结尾(不是>),且符合参数正则的部分(其实就是标签参数),遍历创建对象,放入到match的attrs中,并删除字符串中的 attr=\"值\"部分\n        *               得到 match={tagName:值,attrs:[{name:参数名,value:参数值}]}\n        *        1.1.1.4）若找到标签结尾(\">\"这个字符串),则直接删除字符串中的“>”部分,并返回 match字段\n        *   1.2）若parseStartTag返回了内容(即match有内容),\n        *     1.2.1)则根据match的内容,创建ast对象-->start方法     \n        *       1.2.1.1） 创建ast对象 \n        *            {\n                            tag,//元素 div span h等\n                            attrs,//属性 id class 等\n                            children:[],//子节点 如div 中包含了span 则span就是自己点\n                            type:1,//nodetype的类型\n                            parent:null//该元素的父元素\n                        }\n                1.2.1.2） 若此时还没有root对象，则该ast对象为root对象\n                1.2.1.3） 当前父节点 createParent,也为该ast对象\n                1.2.1.4） 将该对象放入到ast对象栈 stack中\n            1.2.2） 继续下一轮循环,回到1)\n            1.3) 若parseStartTag没有返回内容,html匹配结束标签正则(</div>这种符合结束标签的字符串)\n            1.3.1）若匹配到结束标签\n                1.3.1.1)删除html字符串中“</div>”部分\n                1.3.1.2）将当前节点的ast与父节点关联起来，--调用end()\n                1.3.1.2.1）从stack栈中取出最后一个放入的ast对象(取出栈中就不存在该对象了),element\n                1.3.1.2.2) 获取stack中倒数第二个放入的ast对象createParent,若createParent存在,\n                        则element.parent为createParent.tag;\n                        createParent.children.push(element)\n        2) 若此时的html不是以<开头，则表示是文本部分\n        2.1）截取html中普通文本内容text\n        2.2) 若text有内容\n                2.2.1）删除html中 字符串部分如“hello {{msg}}”\n                2.2.2) 将文本内容放入root中 charts()\n                2.2.2.1) 替换text中的空字符串\n                2.2.2.2）若替换后内容仍存在,则createParent.children中追加对象\n                            {\n                                type:3//普通文本\n                                text:text//文本内容\n                            }\n    html中再无内容，则返回root对象\n  */","import { generate } from \"./generate\";\nimport { parseHTML } from \"./parseAst\";\n\nexport function compileToFunction(el) {\n  // 1.将html 变成ast语法树\n  let ast = parseHTML(el);\n  // console.log('---ast',ast);\n  // 2. ast语法树变成render函数\n  // 2.1）ast语法树变成 字符串\n  \n  let code = generate(ast);//_c _v _s\n  // console.log('----ast语法变成的字符串',code);\n  // 2.2）字符串变成render函数\n  let render = new Function(`with(this){console.log('render',this);return ${code}}`);//code中的this 指向了Vue实例对象，其中msg的值相当于vue实例的msg值\n  // console.log('---render',render);\n  return render;\n}\n/**\n * \n * \n let objs = {a:1,b:2};\nwith(objs){//利用with提供作用域\n  console.log(a,b)//1,2\n}\n */\n","let callback = []//放回调方法\nlet pending = false;\nfunction flush(){\n    callback.forEach(cb=>cb())\n    pending = false;\n}\nlet timerFunc\n//处理兼容问题\nif(Promise){\n    timerFunc = ()=>{\n        Promise.resolve().then(flush)//异步处理\n    }\n}else if(MutationObserver){//h5 的异步方法 可以监听dom的变化 监控完毕之后再异步更新\n    let observe = new MutationObserver(flush)\n    let textNode = document.createTextNode(1);//创建文本\n    observe.observe(textNode,{characterData:true})//观测文本内容\n    timerFunc = ()=>{\n        textNode.textContent = 2;//当文本内容变成2时 执行flush方法--课堂解说\n    }\n}else if(setImmediate){//ie\n    timerFunc = ()=>{\n        setImmediate(flush)\n    }\n}\n/**nextTick :兼容不同浏览器 处理异步 */\nexport function nextTick(cb){\n    console.log('nextT',cb);\n    //队列\n    callback.push(cb);\n    //promise.then() vue3中\n    if(!pending){\n        timerFunc()//异步方法 但是要处理兼容问题\n        pending =  true;\n    }\n}\n","/**重写数组中的方法\n * 类名.prototype ->指向原型对象,该对象中包含了所有实例共享的属性和方法\n * 对象.__proto__ ->指向该对象所属类的prototype 两个完全相等\n */\n\n\n\n//1.获取原数组中的方法\nlet oldArrayProtoMethods = Array.prototype;\n//2.继承 ->通过指定原型对象 创建新对象ArrayMethods  ;ArrayMethods.__proto__ 指向oldArrayProtoMethods\nexport let ArrayMethods = Object.create(oldArrayProtoMethods);\n//3.列出所有需要劫持的方法\nlet methods = [\n  'push',\n  'pop',\n  'unshift',\n  'shift',\n  'pop'\n];\nmethods.forEach(item=>{\n  ArrayMethods[item] = function(...args){\n    // console.log('---劫持了数组方法item',this,args)//此时的args是个数组[],会将传入的内容放入该数组中s\n    let result = oldArrayProtoMethods[item].apply(this,args);\n    //1.此时要考虑数组追加数据的情况  如原arr = [1,2]\n    //因为追加的数据可能是1)普通3==>[1,2,3]    2）对象 {a:1} ==>[1,2,{a:1}]\n    //2.考虑追加的方式 push unshift splice\n    let inserted;//追加的内容\n    switch(item){\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break;\n      case 'splice':\n        inserted = args.splice(2);// arr.splice(开始位置,删除长度,追加内容)\n        break;\n    }\n    /*对追加的内容进行劫持observer(inserted)\n      但是因为observer方法在./index.js中,此处无法获取(别在此处引入index.js,因为index.js引入了当前文件，会造成互相引用)\n      可以考虑将observer方法绑定在当前实例对象的某个属性上 这样当前对象可以直接使用\n      先在此处打印下this--》看看this指向谁 -通过打印得知,this指向当前数组对象 list\n    */\n    // console.log('---this',this)\n    let obj = this.__ob__;\n    if(inserted){\n      obj.observerArray(inserted)//因为args是数组 所以推荐使用observerArray\n    }\n    obj.dep.notify();\n    return result;\n    \n  }\n})","//dep就是发布者\nlet id = 0;\nclass Dep{\n    constructor(){\n        this.id = id++;\n        this.subs = [];//存储依赖列表\n    }\n    //收集watcher->添加依赖\n    depend(){\n        //希望watcher 可以存放 dep -双向记忆\n        // this.subs.push(Dep.target)//Dep.target就是watcher\n        Dep.target.addDep(this);//this 代表当前dep实例\n    }\n    addSub(watcher){\n        this.subs.push(watcher);\n    }\n    //更新watcher ->通知更新\n    notify(){\n        this.subs.forEach(watcher=>{\n            watcher.update()//执行watcher实例的getter()->_update(_render())//其实就是defineProperty中调用了几次set(修改了几个属性),执行几次更新\n        })\n    }\n}\n//添加watcher-->向Dep中添加 \nDep.target = null;\nexport function pushTarget(watcher){\n    Dep.target = watcher;\n    // console.log('---Dep.target',Dep.target)\n}\n//删除watcher\nexport function popTarget(){\n    Dep.target = null;\n    // console.log('---popTarget.target',Dep.target)\n}\nexport default Dep;","/**需要劫持的类型分两种\n * 1) 对象: 利用Object.defineProperty \n *    -缺点:只能对对象中的一个属性进行劫持\n *    -遍历:{a:1,b:2,c:3}   \n *    -递归:{a:{b:1}} get set\n * 2) 数组:方法函数劫持,重写数组方法 push unshift pop splice\n *    \n * **/\nimport {ArrayMethods} from './arr'\nimport Dep from './dep'\n//对外暴漏劫持对象方法\nexport function observer(data) {\n  // console.log('---observer', data);\n  if (typeof data != 'object' || data == null) {\n    return data; //若data不是对象 或者为null 则不需要劫持\n  }\n  //1.对象 通过一个类进行劫持\n  return new Observer(data)\n}\nclass Observer {\n  //vue2 通过defineProperty 缺点:只能对对象中的一个属性进行劫持\n  constructor(value) { //构造器\n     /**给value上新增一个属性__obj__,值为Observer当前实例对象,\n     * 这样在劫持的data中都会有一个不可枚举的属性__obj__,可枚举性决定了这个属性能否被for…in查找遍历到\n     * 该属性直接指向当前observer实例对象（则可以直接使用observer实例上的方法）\n     * **/\n      Object.defineProperty(value,\"__ob__\",{\n        enumerable:false,//不能枚举\n        value:this\n      })\n      //给所有对象类型增加一个dep []\n      this.dep = new Dep();//给observer实例对象添加dep -注意 1){} 2[] 不是给里面的属性添加dep\n\n    if(Array.isArray(value)){//数组对象劫持方法\n      value.__proto__ = ArrayMethods;\n      //如果是数组对象 [{a:1},{b:2}]\n      this.observerArray(value)\n    }else{\n      this.walk(value) //遍历非数组对象\n    }\n  }\n  //遍历非数组对象 进行劫持\n  walk(data) {\n    let keys = Object.keys(data) //{a:{n:1},list:[1,2,3],arr:[{n:1,m:2}]} ->[a,list,arr]\n    for (let i = 0; i < keys.length; i++) {\n      let key = keys[i];\n      let value = data[key];\n      defineReactive(data, key, value); //对data中的属性取值和赋值时的操作和处理\n    }\n  }\n  //遍历数组对象 进行劫持\n  observerArray(value){//value=[{a:1},{b:2}]\n    // console.log('--value',value,value.length)\n    for(let i=0;i<value.length;i++){\n      observer(value[i]);//单独劫持数组中的每个对象\n    }\n  }\n}\n//对对象中的属性进行拦截和处理\nfunction defineReactive(data, key, value) {\n  let childDep = observer(value); //对value进行递归 深度代理-> 最初的data可能是{a:{b:1}} 若value值依然是对象 则继续重复劫持该对象--直到值为普通数据\n  // console.log('-childDep1',childDep)\n  let dep = new Dep();//给每一个属性添加一个dep\n  Object.defineProperty(data, key, {\n    get() { //外部调用data.key时触发get方法  -此时需要收集依赖\n      if(Dep.target){//此时target如果有 则是一个watcher,Dep.target是调用了new Watcher()时，构造器调用Watcher的get()添加的,get方法中,先给Dep.target赋值，再调用更新和渲染方法,再将Dep.target=null\n        dep.depend();// 往dep的存储依赖列表subs中存入watcher  --原data中 watcher放dep & dep放watcher 如:data={arr:[1,2,3]}, 对arr对象添加dep(dep中有watcher,watcher中有dep)\n        if(childDep.dep){//childDep.dep是调用 new Observer()时,构造器添加的(new Dep),dep刚new出来，dep只有id 和空数组subs\n          childDep.dep.depend()//数组收集 -当前属性的dep 中添加watcher 如:data={arr:[1,2,3]}, 1 2 3 添加dep(dep中有watcher(通过subs),watcher中有dep(通过deps和depsId))\n        }\n        // console.log('-childDep',value,childDep)\n      }\n      // console.log('--get')\n      // console.log('get Dep',dep);\n      return value;\n    },\n    set(newValue) {\n      // console.log('----set')\n      if (newValue === value) return; //两次内容一样 不做处理\n      observer(newValue)//修改的value也要代理（如 a:{b:1}===> a:{c:1}）,值{c:1}也需要被代理\n      value = newValue; //否则将新值赋值给旧值\n      dep.notify();//如果修改数据 则调用dep的更新方法，该方法会将subs中的每一个watcher进行更新（调用watcher.update,而update就是调用了watcher的getter,getter= new Watcher()时传入的updateComponent函数=vm._update(vm._render())）\n    }\n  })\n}\n","\nimport { nextTick } from \"./utils/nextTick\"\nimport { observer } from \"./observe/index\"\n\n/**初始化数据的文件 */\nexport function initState(vm){\n  let opts = vm.$options\n  // console.log('--opts',opts)\n  //判断\n  if(opts.props){\n    initProps()\n  }\n  if(opts.data){\n    initData(vm)\n  }\n  if(opts.watch){\n    initWatch()\n  }\n  if(opts.computed){\n    initComputed()\n  }\n  if(opts.methods){\n    initMethods()\n  }\n}\nfunction initProps(){\n}\nfunction initWatch(){\n}\nfunction initComputed(){\n}\nfunction initMethods(){\n}\n//vue2 对data初始化\n/**\n * data对象情况区分：--为了解决作用域问题\n * 1）根实例是对象 {}\n * 2) 组件是函数 (){} --是为了保证组件的独立性和可复用性\n */\nfunction initData(vm){\n  // console.log('---对data进行初始化',vm);\n  let data = vm.$options.data;\n  //获取data数据\n  data = vm._data = typeof data =='function'?data.call(vm):data;//1. 注意this 2.为了方便获取 将原option中data的值直接绑定到vm._data中\n  //对数据进行劫持\n  //将data上的所有属性代理到vm实例上\n  for(let key in data){\n    //自定义函数proxy \n    proxy(vm,'_data',key)\n  }\n  observer(data)// 数据劫持！！！！  dep,watcher都在劫持的时候处理 注意 此时拿到的data可能是以下情况 (1）对象  (2) 数组  {a:{n:1},list:[1,2,3],arr:[{n:1,m:2}]}    \n}\n//用于将代理 vm._data属性中的内容 全都直接放到vm中,key依然为原data中的key=> vm._data={a:1,b:2} 代理处理后为:vm.a=1 vm.b=2\nfunction proxy(vm,source,key){\n  Object.defineProperty(vm,key,{//定义vm中的key属性,vm.key时返回 vm._data.key的值\n    get(){\n      return vm[source][key]\n    },\n    set(newValue){//vm.key=newValue时 相当于调用vm._data.key = newValue\n      vm[source][key] = newValue;\n    }\n  })\n}\n\nexport function stateMixin(vm){\n  //队列处理 1)是vue自己的nextTick()   2)用户自己函数cb\n  vm.prototype.$nextTick = function (cb){\n    nextTick(cb);//此时的nextTick就是utils/nextTick暴漏的方法\n  }\n}\n","//1)通过这个watcher类 实现更新 --订阅者\n//new watcher(vm,updateComponent,()=>{},true)\n\nimport { nextTick } from \"../utils/nextTick\";\nimport { popTarget, pushTarget } from \"./dep\";\n\n//因为每个组件 都有一个watcher ,为了区分 则需要一个唯一标识 id\nlet id = 0;\nclass watcher {\n    constructor(vm, updateComponent, cb, options) {\n        // console.log('---watcher 构造器执行',id);\n        //1)\n        this.vm = vm;\n        this.exprOrfn = updateComponent;\n        this.cb = cb;\n        this.options = options;\n        this.id = id++;\n        this.deps = [];//watcher 存放dep\n        this.depsId = new Set();//存放depId\n        //2)判断\n        if (typeof updateComponent === 'function') {\n            this.getter = updateComponent;//用来更新视图\n        }\n        //更新视图\n        this.get()\n    }\n    //watcher放dep & dep放watcher\n    addDep(dep) {\n        //1.去重\n        let id = dep.id;\n        if (!this.depsId.has(id)) {\n            this.deps.push(dep);\n            this.depsId.add(id);\n            //dep中放watcher\n            dep.addSub(this);\n        }\n    }\n    run() {\n        this.get()\n    }\n    //初次渲染-获取对象的值\n    get() {\n        //添加watcher\n        pushTarget(this);//this就是一个watcher实例 初次渲染(第一次调用vm._update(vm._render())之前，添加watcher\n        /**\n         * 渲染页面 调用传入的updateComponent 即为：vm._update(vm._render()),其中_s(msg),会调用vm.msg 即调用observe/index.js defineReactive中的get()方法,此时若data中有多个属性被调用，\n         * 则都执行get方法之后才会执行后面的popTarget -->将Dep.target置为null\n         * */\n        this.getter();\n\n        //初次渲染（第一次调用vm._update(vm._render())）之后 删除watcher\n        popTarget();\n    }\n    //更新-对象的更新\n    update() {\n        // this.get();\n        //注意:不要每次数据更改后，都调用更新-考虑使用缓存\n        queueWatcher(this);\n    }\n}\nlet queue = [];//将需要批量更新的watcher 存放到一个队列中\nlet has = {};\nlet pending = false;\nfunction flushWatcher() {\n    queue.forEach(item => {\n        item.run();//执行watcher的run()->this.get()->1）添加watcher 2）调用vm._update(vm._render()) 3）删除watcher\n        item.cb();//part2://执行new Watcher时传入的回调方法,更新完视图之后 用户在页面new Vue()实例的update函数中写了什么 就执行什么\n    })\n    queue = [];\n    has = {};\n    pending = false;\n}\nfunction queueWatcher(watcher) {//每个组件都是同一个watcher\n    let id = watcher.id;\n    console.log('--watcher.id', watcher)\n    //通过id 去重 \n    if (has[id] == null) {\n        //队列处理 将watcher放入队列中\n        queue.push(watcher);\n        has[id] = true;//\n        //-节流 -一定时间内触发多次，只触发第一次\n        if (!pending) {\n            // console.log('---截流')\n            // setTimeout(()=>{//异步 等待同步代码执行完毕之后再执行该异步方法\n            //     console.log('---setTime',queue)\n            //     queue.forEach(item=>item.run())\n            //     queue = [];\n            //     has = {};\n            //     pending = false;\n            // },0)//通过nextTick实现更优化\n            /**\n             * nextTick相当于定时器\n             */\n            nextTick(flushWatcher)\n        }\n        console.log('---zhunbeigai pending')\n        pending = true;\n\n    }\n}\nexport default watcher\n\n/**\n * 收集依赖\n * vue \n * dep:就是data:{name,msg}中有多少个属性,则dep中有多少个 ，dep和data中的属性是一一对应的\n * watcher:就是data中的属性，在视图上用了几个,dep的subs中就有几个watcher  -（第一个版本中 同时修改两个属性，msg,name subs中的两个watcher是同一个 subs=[watcher0,watcher0]）\n * dep与watcher的关系： 1对多 dep.name = [w1,w2] (后面考虑computed 其实是多对多)\n */\n\n/**\n * nextTick 原理 -优化\n * 1.创建nextTick()\n */","/**\n * \n * @param {*} oldVnode 原容器\n * @param {*} vnode 虚拟dom\n */\nexport function patch(oldVnode,vnode){\n    // console.log(oldVnode,vnode)\n    // vnode=>真实dom\n    //1)创建新的DOM\n    let el = createEl(vnode);\n    // console.log('---真实domel',el);\n    //2)替换 2.1）获取父节点 2.2）插入新dom 2.3）删除旧元素\n    let parentEl = oldVnode.parentNode;// body\n    parentEl.insertBefore(el,oldVnode.nextsibling);//在旧节点的下一个兄弟节点 插入新dom\n    parentEl.removeChild(oldVnode);//删除旧元素\n    return el;//返回新dom\n}\n//创建dom\nfunction createEl(vnode){//vnode:{tag,text,data,children}---{tag: 'div', data: {…}, key: undefined, children: Array(2), text: undefined}\n    let {tag,children,key,data,text} = vnode;\n    if(typeof tag =='string'){//标签\n        vnode.el = document.createElement(tag);\n        //children->遍历子节点 继续创建dom\n        if(children.length>0){\n            children.forEach(child => {\n                vnode.el.appendChild(createEl(child))\n            });\n        }\n    }else{//文本\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el;//此时的el已经是真实dom\n}\n/**\n * vue 渲染流程：\n * 1） 数据初始化\n * 2） 对模版进行编译\n *     模版内容-> ast语法树->变成render函数\n *     ->render函数执行后得到vnode ->变成真实dom->放到页面\n *    \n */","import watcher from \"./observe/watcher\";\nimport { patch } from \"./vnode/patch\";\n\n/**\n * \n生命周期文件\n */\nexport function mounteComponent(vm,el){\n    //源码--页面加载之前 调用beforeMounted\n    callHook(vm,\"beforeMounted\");\n    //part1中手动调用了更新页面方法-vm._update(vm._render())\n    //vm._update(vm._render())//1)vm._render将render函数变成vnode 2)vm._update 将vnode变成真实dom 放到页面上 -本次操作即为页面加载\n    //part2中 通过observe/watcher\n    let updateComponent = ()=>{\n        vm._update(vm._render())\n    }\n    //new watcher时调用了构造器，而构造器中默认调用了get(),get()又调用了传入的updateComponent -part2:这个watcher是用于渲染的 目前没有任何功能\n    new watcher(vm,updateComponent,()=>{\n        callHook(vm,'updated')//生命周期 updated的发布\n    },true)\n    callHook(vm,\"mounted\");\n\n}\n/**\n * \n * @param {*} Vue \n */\nexport function lifecycleMixin(Vue){\n    Vue.prototype._update = function(vnode){//vnode => 真实的dom\n        console.log('---vnode',vnode)\n        let vm = this;\n        //参数 1）容器节点 2)vnode\n        vm.$el = patch(vm.$el,vnode);//vue中的patch方法就是将虚拟dom->真实dom\n    } \n}\n//1)render()函数 ==》vnode ==》真实dom\n\n//生命周期调用（订阅发布的模式）\nexport function callHook(vm,hook){\n    // console.log('---',hook);\n    const handles = vm.$options[hook]// 如hook为created, 则handles=[a,b,created]\n    console.log('---handles',handles);\n    if(handles){\n        for(let i=0;i<handles.length;i++){//性能最好的就是这种原始for\n            handles[i].call(this);//改变生命周期中的this指向问题\n        }\n    }\n}","//Vue所有初始化的内容\nimport { compileToFunction } from \"./compile/index\";\nimport { initState } from \"./initState\";\nimport { callHook, mounteComponent } from \"./lifecycle\";\nimport { mergeOptions } from \"./utils/index\";\nexport function initMixin(Vue){\n  //_init方法放到Vue原型链上\n  Vue.prototype._init = function(options){\n    // console.log('_initMixin中Vue原型链上的',options);\n    let vm = this\n    // vm.$options = options//将参数帮到实例上\n    vm.$options = mergeOptions(Vue.options,options);//将Vue上原有的option属性和本次传入的option合并 重新放到实例对象上\n    callHook(vm,'beforeCreated');//初始化之前\n    //初始化状态\n    initState(vm);\n    callHook(vm,'created');//初始化之后\n    //渲染模版\n    if(vm.$options.el){\n      //调用vm实例的$mount方法--此方法需要定义\n      vm.$mount(vm.$options.el)\n    }\n  }\n  //创建$mount方法\n  Vue.prototype.$mount = function(el){\n    // console.log('---el',el)\n    let vm = this;\n    el = document.querySelector(el);//根据id获取当前绑定的根节点-object\n    vm.$el = el;//将根节点绑定到vm实例的$el属性上\n    // console.log('---el',typeof el);\n    let options = vm.$options;\n    if(!options.render){//new Vue的时候没有指定render函数\n      let template = options.template;\n      if(!template && el){//new Vue的时候没有指定模版，且存在根节点\n        el = el.outerHTML; //string-[1]\n        //获取到el的最终目的是为了变成render函数\n        //将el--->ast语法树 ast语法树--->render函数\n        let render = compileToFunction(el);\n        // console.log('---render',render);\n        //1) 将render 函数变成vnode\n        //2) 将vnode变成真实DOM 放到页面上\n        options.render = render;//将拿到的render函数放到实例对象options的render中\n        //---todo 将虚拟的dom变为真实dom\n\n      }\n\n    }\n    //挂载组件--调用生命周期文件中的挂载组件方法\n    mounteComponent(vm,el)//vm._update(vm._render)\n  }\n}\n/**\n * [1].获取到el之后要做的事情是\n *     1)变成ast语法树\n *     2)生成render()函数\n *     3)render函数变成虚拟dom\n *     4)\n \n * }\n */\n","\n//将render函数变成vnode(虚拟节点)\nexport function renderMixin(Vue){\n    /**\n     * 标签解析\n     */\n    Vue.prototype._c = function(){\n        //创建标签\n        return createElement(...arguments);\n    }\n    /**\n     * 文本解析\n     */\n     Vue.prototype._v = function(text){\n        return createText(text)\n    }\n    /**\n     * 变量解析 _s(name) -->{{name}}\n     */\n     Vue.prototype._s = function(val){\n        // console.log('---_S',val);\n        return val ==null?'':(typeof val ==='object')?JSON.stringify(val):val\n    }\n    Vue.prototype._render = function(){\n        let vm = this;\n        let render = vm.$options.render;//获取实例上的render(该render最终是ast语法树转换成的render函数)\n        let vnode = render.call(this)//执行render函数,将当前vm实例作为render中的this\n        // console.log('---vnode',vnode)\n        return vnode;\n    }\n}\n//创建元素的方法\n/**\n * \n * @param {*} tag \n * @param {*} data \n * @param  {...any} chiildren \n */\nfunction createElement(tag,data={},...children){\n    return vnode(tag,data,data.key,children)\n}\n//创建文本\nfunction createText(text){\n    return vnode(undefined,undefined,undefined,undefined,text)\n}\nfunction vnode(tag,data,key,children,text){\n    return {\n        tag,data,key,children,text\n    }\n}\n/**\n * vnode节点\n * {\n *  tag,\n * text,\n * chiildren\n * }\n */","//项目入口文件\nimport { initGlobalApi } from './global-api/index.js'\nimport {initMixin} from './init.js'\nimport { stateMixin } from './initState.js'\nimport { lifecycleMixin } from './lifecycle.js'\nimport { renderMixin } from './vnode/index.js'\nfunction Vue(options){//通过new Vue调用\n  // console.log('---100 -w 的作用 自动更新dist的vue')\n  // console.log(options)\n  //初始化\n  this._init(options)\n}\ninitMixin(Vue)//调用该方法会向Vue对象的原型链上添加_init方法——对状态进行初始化\nlifecycleMixin(Vue)//对生命周期进行初始化\nrenderMixin(Vue)//添加vm._render方法\nstateMixin(Vue)//给vm添加$nextTick\n\n//全局方法 vue.mixin Vue.component Vue.extend\ninitGlobalApi(Vue);//初始化全局方法\nexport default Vue\n\n/**\n * new Vue(options) \n *    ->调用当前vue实例的_init(options)\n *      (前提是在init.js中initMixin方法已定义了Vue.property._init方法\n *       Vue.property._init方法,调用mergeOptions(Vue.options,options),此处的options就是New Vue(options)的参数\n */"],"names":["HOOKS","starts","data","parentVal","childVal","computed","watch","methods","forEach","hooks","mergeHook","concat","mergeOptions","parent","child","options","key","mergeField","initGlobalApi","Vue","Mixin","mixin","defaultTagRE","genProps","attrs","str","i","length","attr","name","obj","value","split","item","JSON","stringify","slice","genChildren","el","children","map","gen","join","node","type","generate","text","test","tokens","lastindex","lastIndex","match","exec","index","push","trim","code","tag","ncname","qnameCapture","startTagOpen","RegExp","attribute","startTagClose","endTag","createASTElement","root","createParent","stack","start","element","charts","replace","end","pop","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","tagName","endTagMatch","advance","atrr","n","substring","compileToFunction","ast","render","Function","callback","pending","flush","cb","timerFunc","Promise","resolve","then","MutationObserver","observe","textNode","document","createTextNode","characterData","textContent","setImmediate","nextTick","console","log","oldArrayProtoMethods","Array","prototype","ArrayMethods","Object","create","args","result","apply","inserted","splice","__ob__","observerArray","dep","notify","id","Dep","constructor","subs","depend","target","addDep","addSub","watcher","update","pushTarget","popTarget","observer","Observer","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","childDep","get","set","newValue","initState","vm","opts","$options","props","initData","_data","call","proxy","source","stateMixin","$nextTick","updateComponent","exprOrfn","deps","depsId","Set","getter","has","add","run","queueWatcher","queue","flushWatcher","patch","oldVnode","vnode","createEl","parentEl","parentNode","insertBefore","nextsibling","removeChild","createElement","appendChild","mounteComponent","callHook","_update","_render","lifecycleMixin","$el","hook","handles","initMixin","_init","$mount","querySelector","template","outerHTML","renderMixin","_c","arguments","_v","createText","_s","val","undefined"],"mappings":"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"}